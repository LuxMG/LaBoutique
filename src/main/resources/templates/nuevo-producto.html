<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

    <head>
        <meta charset="UTF-8" />
        <meta content="width=device-width, initial-scale=1.0" name="viewport" />
        <meta content="ie=edge" http-equiv="X-UA-Compatible" />
        <meta content="La Boutique " name="description" />
        <meta content="La Boutique" name="author" />
        <title>La Boutique</title>
        <!-- Link al CSS de BOOTSTRAP -->
        <link rel="stylesheet" th:href="@{/assets/bootstrap.min.css}" />
        <!-- Link a nuestro CSS -->
        <link rel="stylesheet" th:href="@{/css/style.css}" />
        <!--Favicon-->
        <link rel="shortcut icon" th:href="@{/img/logo_percha_chico.png}" type="image/x-icon">
    </head>
    <body>
        <!-- HEADER-->
        <header th:replace="${session.id != null} ? ~{fragments/header :: header} : ~{fragments/header-index :: header-index}"></header>
        <!-- MAIN-->
        <main class="nuevo-producto">
            <div class="container">
                <div class="row justify-content-xl-center">
                    <div class="alert alert-danger col-xl-6 mt-3" th:if="${error}" th:text="${error}"> </div>
                </div>
            </div>
            <h1 class="mt-5"> Ingresa un nuevo producto</h1>

            <form method="post" th:action="@{/producto/__${action}__}" enctype="multipart/form-data" th:object="${producto}">
                <div class="titulos-form">
                    <label for="">Título</label>
                    <input type="text" placeholder="Escribir el nombre del producto" th:field="*{titulo}"><br>

                    <label for="">Descripción</label>
                    <textarea th:field="*{descripcion}" placeholder="Escribir una descripción breve del producto" rows="3"></textarea><br>

                    <label for="categoria">Categoría</label>
                    <select aria-label="Seleccionar una categoria" class="form" th:field="*{categoria}">
                        <option aria-label="seleccionar una categoria" value="0">Seleccionar una categoria</option>
                        <option th:each="categoria : ${categorias}" th:text="${categoria.nombre}" th:value="${categoria.id}"></option>
                    </select><br>
                    <div th:if="${action == 'modificar'}">
                        <img id="img_detalle" th:if="${producto.foto != null}" th:src="${'/foto/__${producto.foto.id}__'}">
                        <img id="img_detalle" th:if="${producto.foto == null}" src="/img/imagen_no_disponible.png">
                    </div>
                    <label for="">Subir una imagen</label>
                    <input type="file" placeholder="Foto" name="archivo" th:value="${archivo}"><br>
                </div>

                <input th:field="*{id}" hidden>
                <input th:field="*{estado}" hidden>
                <input th:field="*{tipo}" hidden>
                <input th:field="*{foto}" hidden>
                <input th:field="*{beneficiario}" hidden>
                <input th:field="*{donante}" hidden>

                <button type="submit" class="btn btn-card"
                        th:text="${action == 'guardar'} ? 'cargar producto' : 'Guardar cambios'"></button>



            </form>

        </main>
        <!--FOOTER-->
        <footer th:replace="fragments/footer :: footer"></footer>
        <!-- Link al JS de Bootstrap-->
        <script th:src="@{/assets/bootstrap.bundle.min.js}"></script>
    </body>

</html>